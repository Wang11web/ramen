(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-291b9d38"],{1799:function(e,t,c){"use strict";var a=c("7a23"),n={"aria-label":"Page navigation example"},l={class:"pagination justify-content-center"},r=Object(a["h"])("span",{"aria-hidden":"true"},"«",-1),i=[r],d=["onClick"],b=Object(a["h"])("span",{"aria-hidden":"true"},"»",-1),s=[b];function o(e,t,c,r,b,o){return Object(a["x"])(),Object(a["g"])("nav",n,[Object(a["h"])("ul",l,[Object(a["h"])("li",{class:Object(a["r"])(["page-item",{disabled:1==c.pages.current_page}])},[Object(a["h"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(a["V"])((function(t){return o.updatePage(e.page-1)}),["prevent"]))},i)],2),(Object(a["x"])(!0),Object(a["g"])(a["a"],null,Object(a["F"])(c.pages.total_pages,(function(e){return Object(a["x"])(),Object(a["g"])("li",{class:Object(a["r"])(["page-item",{active:e===c.pages.current_page}]),key:e},[Object(a["h"])("a",{class:"page-link",href:"#",onClick:Object(a["V"])((function(t){return o.updatePage(e)}),["prevent"])},Object(a["K"])(e),9,d)],2)})),128)),Object(a["h"])("li",{class:Object(a["r"])(["page-item",{disabled:c.pages.current_page==c.pages.total_pages}])},[Object(a["h"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(a["V"])((function(t){return o.updatePage(e.page+1)}),["prevent"]))},s)],2)])])}var O={props:["pages"],methods:{updatePage:function(e){this.$emit("emit-page",e)}}};c("dc71");O.render=o;t["a"]=O},b0c0:function(e,t,c){var a=c("83ab"),n=c("9bf2").f,l=Function.prototype,r=l.toString,i=/^\s*function ([^ (]*)/,d="name";a&&!(d in l)&&n(l,d,{configurable:!0,get:function(){try{return r.call(this).match(i)[1]}catch(e){return""}}})},ba53:function(e,t,c){},cf2a:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),n={class:"p-4"},l={class:"table mt-4"},r=Object(a["h"])("thead",null,[Object(a["h"])("tr",null,[Object(a["h"])("th",null,"購買時間"),Object(a["h"])("th",null,"Email"),Object(a["h"])("th",null,"購買款項"),Object(a["h"])("th",null,"應付金額"),Object(a["h"])("th",null,"是否付款"),Object(a["h"])("th",null,"編輯")])],-1),i=["textContent"],d={class:"text-right"},b={class:"form-check form-switch"},s=["id","onUpdate:modelValue","onChange"],o=["for"],O={key:0},u={key:1},j={class:"btn-group"},h=["onClick"],p=["onClick"];function g(e,t,c,g,m,f){var x=Object(a["H"])("LoadingStyle"),v=Object(a["H"])("Loading"),y=Object(a["H"])("Pagination"),k=Object(a["H"])("OrderModal"),M=Object(a["H"])("DelModal");return Object(a["x"])(),Object(a["g"])(a["a"],null,[Object(a["j"])(v,{active:m.isLoading},{default:Object(a["T"])((function(){return[Object(a["j"])(x)]})),_:1},8,["active"]),Object(a["h"])("div",n,[Object(a["h"])("table",l,[r,Object(a["h"])("tbody",null,[(Object(a["x"])(!0),Object(a["g"])(a["a"],null,Object(a["F"])(m.orders,(function(t,c){return Object(a["x"])(),Object(a["g"])(a["a"],{key:c},[m.orders.length?(Object(a["x"])(),Object(a["g"])("tr",{key:0,class:Object(a["r"])({"text-secondary":!t.is_paid})},[Object(a["h"])("td",null,Object(a["K"])(e.$filters.date(t.create_at)),1),Object(a["h"])("td",null,[t.user?(Object(a["x"])(),Object(a["g"])("span",{key:0,textContent:Object(a["K"])(t.user.email)},null,8,i)):Object(a["f"])("",!0)]),Object(a["h"])("td",null,[Object(a["h"])("ul",null,[(Object(a["x"])(!0),Object(a["g"])(a["a"],null,Object(a["F"])(t.products,(function(e,t){return Object(a["x"])(),Object(a["g"])("li",{key:t},Object(a["K"])(e.product.title)+" 數量："+Object(a["K"])(e.qty)+" "+Object(a["K"])(e.product.unit),1)})),128))])]),Object(a["h"])("td",d,Object(a["K"])(e.$filters.currency(t.total)),1),Object(a["h"])("td",null,[Object(a["h"])("div",b,[Object(a["U"])(Object(a["h"])("input",{class:"form-check-input",type:"checkbox",id:"paidCheckbox".concat(t.id),"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return f.updateOrder(t)}},null,40,s),[[a["N"],t.is_paid]]),Object(a["h"])("label",{class:"form-check-label",for:"paidCheckbox".concat(t.id)},[t.is_paid?(Object(a["x"])(),Object(a["g"])("span",O,"已付款")):(Object(a["x"])(),Object(a["g"])("span",u,"未付款"))],8,o)])]),Object(a["h"])("td",null,[Object(a["h"])("div",j,[Object(a["h"])("div",{class:"btn btn-outline-primary btn-sm",onClick:function(e){return f.openModal(t)}},"檢視",8,h),Object(a["h"])("div",{class:"btn btn-outline-danger btn-sm",onClick:function(e){return f.openDelOrderModal(t)}},"刪除",8,p)])])],2)):Object(a["f"])("",!0)],64)})),128))])])]),Object(a["j"])(y,{pages:m.pagination,onEmitPage:f.getOrders},null,8,["pages","onEmitPage"]),Object(a["j"])(k,{ref:"orderModal",order:m.tempOrder,onUpdateOrder:f.updateOrder},null,8,["order","onUpdateOrder"]),Object(a["j"])(M,{item:m.tempOrder,ref:"delModal",onDelItem:f.delOrder},null,8,["item","onDelItem"])],64)}var m=c("5530"),f=(c("99af"),c("6ff1")),x=c("1799"),v=(c("b0c0"),{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),y={class:"modal-dialog modal-xl",role:"document"},k={class:"modal-content border-0"},M=Object(a["h"])("div",{class:"modal-header bg-dark text-white"},[Object(a["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(a["h"])("span",null,"訂單細節")]),Object(a["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),K={class:"modal-body"},_={class:"row"},w={class:"col-sm-4"},C=Object(a["h"])("h3",null,"用戶資訊",-1),P={class:"table"},L={key:0},$=Object(a["h"])("th",{style:{wigth:"100px"}},"姓名",-1),D=Object(a["h"])("th",null,"Email",-1),S=Object(a["h"])("th",null,"電話",-1),F=Object(a["h"])("th",null,"地址",-1),H={class:"col-sm-8"},U=Object(a["h"])("h3",null,"訂單細節",-1),V={class:"table"},E=Object(a["h"])("th",{style:{wigth:"100px"}},"訂單標號",-1),q=Object(a["h"])("th",null,"下單時間",-1),I=Object(a["h"])("th",null,"付款時間",-1),J={key:0},N={key:1},T=Object(a["h"])("th",null,"付款狀態",-1),z={key:0,class:"text-success"},A={key:1,class:"text-muted"},B=Object(a["h"])("th",null,"總金額",-1),G=Object(a["h"])("h3",null,"選購商品",-1),Q={class:"table"},R={class:"text-end"},W=Object(a["h"])("div",{class:"modal-footer"},[Object(a["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"關閉 ")],-1);function X(e,t,c,n,l,r){return Object(a["x"])(),Object(a["g"])("div",v,[Object(a["h"])("div",y,[Object(a["h"])("div",k,[M,Object(a["h"])("div",K,[Object(a["h"])("div",_,[Object(a["h"])("div",w,[C,Object(a["h"])("table",P,[l.tempOrder.user?(Object(a["x"])(),Object(a["g"])("tbody",L,[Object(a["h"])("tr",null,[$,Object(a["h"])("td",null,Object(a["K"])(l.tempOrder.user.name),1)]),Object(a["h"])("tr",null,[D,Object(a["h"])("td",null,Object(a["K"])(l.tempOrder.user.email),1)]),Object(a["h"])("tr",null,[S,Object(a["h"])("td",null,Object(a["K"])(l.tempOrder.user.tel),1)]),Object(a["h"])("tr",null,[F,Object(a["h"])("td",null,Object(a["K"])(l.tempOrder.user.address),1)])])):Object(a["f"])("",!0)])]),Object(a["h"])("div",H,[U,Object(a["h"])("table",V,[Object(a["h"])("tbody",null,[Object(a["h"])("tr",null,[E,Object(a["h"])("td",null,Object(a["K"])(l.tempOrder.id),1)]),Object(a["h"])("tr",null,[q,Object(a["h"])("td",null,Object(a["K"])(e.$filters.date(l.tempOrder.create_at)),1)]),Object(a["h"])("tr",null,[I,Object(a["h"])("td",null,[l.tempOrder.paid_date?(Object(a["x"])(),Object(a["g"])("span",J,Object(a["K"])(e.$filters.date(l.tempOrder.paid_date)),1)):(Object(a["x"])(),Object(a["g"])("span",N,"時間不確定"))])]),Object(a["h"])("tr",null,[T,Object(a["h"])("td",null,[l.tempOrder.is_paid?(Object(a["x"])(),Object(a["g"])("span",z,"已付款")):(Object(a["x"])(),Object(a["g"])("span",A,"未付款"))])]),Object(a["h"])("tr",null,[B,Object(a["h"])("td",null,Object(a["K"])(e.$filters.currency(l.tempOrder.total)),1)])])]),G,Object(a["h"])("table",Q,[Object(a["h"])("tbody",null,[(Object(a["x"])(!0),Object(a["g"])(a["a"],null,Object(a["F"])(l.tempOrder.products,(function(t){return Object(a["x"])(),Object(a["g"])("tr",{key:t.id},[Object(a["h"])("th",null,Object(a["K"])(t.product.title),1),Object(a["h"])("td",null,Object(a["K"])(t.qty)+" "+Object(a["K"])(t.product.unit),1),Object(a["h"])("td",R,Object(a["K"])(e.$filters.currency(t.final_total)),1)])})),128))])])])])]),W])])],512)}var Y=c("e0ae"),Z={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{model:{},tempOrder:{}}},watch:{order:function(){this.tempOrder=this.order}},mixins:[Y["a"]]};Z.render=X;var ee=Z,te=c("4b79"),ce={data:function(){return{orders:{},pagination:{},isLoading:!1,tempOrder:{},currentPage:1}},components:{DelModal:f["a"],Pagination:x["a"],OrderModal:ee,LoadingStyle:te["a"]},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=t;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wang11-api","/admin/orders/?page=").concat(t);this.isLoading=!0,this.$http.get(c).then((function(t){console.log(t),e.isLoading=!1,t.data.success&&(e.orders=t.data.orders,e.pagination=t.data.pagination)}))},openModal:function(e){this.tempOrder=Object(m["a"])({},e);var t=this.$refs.orderModal;t.showModal()},updateOrder:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wang11-api","/admin/order/").concat(e.id),a={is_paid:e.is_paid};this.$http.put(c,{data:a}).then((function(e){t.isLoading=!1,t.getOrders(t.currentPage),t.pushMessageState(e,"更新付款狀態")}))},openDelOrderModal:function(e){this.tempOrder=Object(m["a"])({},e);var t=this.$refs.delModal;t.showModal()},delOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wang11-api","/admin/order/").concat(this.tempOrder.id);this.isLoading=!0,this.$http.delete(t).then((function(t){e.isLoading=!1;var c=e.$refs.delModal;c.hideModal(),e.pushMessageState(t,"刪除"),e.getOrders(e.currentPage)}))}},created:function(){this.getOrders()},inject:["emitter","pushMessageState"]};ce.render=g;t["default"]=ce},dc71:function(e,t,c){"use strict";c("ba53")}}]);
//# sourceMappingURL=chunk-291b9d38.20d695e1.js.map