(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08cd3d92"],{"0b42":function(t,e,c){var n=c("861d"),a=c("e8b5"),o=c("b622"),r=o("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)?n(e)&&(e=e[r],null===e&&(e=void 0)):e=void 0),void 0===e?Array:e}},"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),o=c("2d00"),r=a("species");t.exports=function(t){return o>=51||!n((function(){var e=[],c=e.constructor={};return c[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"30c7":function(t,e,c){"use strict";var n=c("7a23"),a={class:"bg"},o={class:"mt_bar"};function r(t,e){return Object(n["x"])(),Object(n["g"])("div",a,[Object(n["h"])("div",o,[Object(n["G"])(t.$slots,"default")])])}c("d9c1");const i={};i.render=r;e["a"]=i},"4b79":function(t,e,c){"use strict";var n=c("7a23"),a={class:"loadingio-spinner-spinner-m6fcvhoraja"},o=Object(n["h"])("div",{class:"ldio-pt4f6b6fqq"},[Object(n["h"])("div"),Object(n["h"])("div"),Object(n["h"])("div"),Object(n["h"])("div"),Object(n["h"])("div"),Object(n["h"])("div"),Object(n["h"])("div"),Object(n["h"])("div"),Object(n["h"])("div"),Object(n["h"])("div")],-1),r=[o];function i(t,e){return Object(n["x"])(),Object(n["g"])("div",a,r)}c("c541");const s={};s.render=i;e["a"]=s},"65f0":function(t,e,c){var n=c("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},8418:function(t,e,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var r=n(e);r in t?a.f(t,r,o(0,c)):t[r]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("d039"),o=c("e8b5"),r=c("861d"),i=c("7b0b"),s=c("50c4"),l=c("8418"),u=c("65f0"),d=c("1dde"),b=c("b622"),f=c("2d00"),j=b("isConcatSpreadable"),h=9007199254740991,O="Maximum allowed index exceeded",p=f>=51||!a((function(){var t=[];return t[j]=!1,t.concat()[0]!==t})),m=d("concat"),v=function(t){if(!r(t))return!1;var e=t[j];return void 0!==e?!!e:o(t)},g=!p||!m;n({target:"Array",proto:!0,forced:g},{concat:function(t){var e,c,n,a,o,r=i(this),d=u(r,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?r:arguments[e],v(o)){if(a=s(o.length),b+a>h)throw TypeError(O);for(c=0;c<a;c++,b++)c in o&&l(d,b,o[c])}else{if(b>=h)throw TypeError(O);l(d,b++,o)}return d.length=b,d}})},a68e:function(t,e,c){},b0c0:function(t,e,c){var n=c("83ab"),a=c("9bf2").f,o=Function.prototype,r=o.toString,i=/^\s*function ([^ (]*)/,s="name";n&&!(s in o)&&a(o,s,{configurable:!0,get:function(){try{return r.call(this).match(i)[1]}catch(t){return""}}})},b789:function(t,e,c){"use strict";c.r(e);c("b0c0");var n=c("7a23"),a={class:"container pt-4"},o={class:"row gx-5"},r={class:"col-6"},i={class:"table align-middle"},s=Object(n["h"])("thead",null,[Object(n["h"])("th"),Object(n["h"])("th",null,"品名"),Object(n["h"])("th",{style:{width:"110px"}},"數量"),Object(n["h"])("th",{class:"text-end"},"單價")],-1),l=["onClick"],u=Object(n["h"])("i",{class:"bi bi-x"},null,-1),d=[u],b={key:0,class:"text-success"},f={class:"input-group input-group-sm"},j=["onChange","disabled","onUpdate:modelValue"],h={class:"input-group-text"},O={class:"text-end"},p={key:0},m={class:"text-success"},v={key:1},g=Object(n["h"])("td",{colspan:"3",class:"text-end"},"總計",-1),x={class:"text-end"},y={key:0},w=Object(n["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),k={class:"text-end text-success"},C={class:"input-group input-group-sm mb-3"},V={class:"input-group-append"},L=Object(n["i"])("繼續選購"),_={class:"col-6"},$={class:"mb-3"},U=Object(n["h"])("label",{for:"name",class:"form-label"},"姓名",-1),q={class:"mb-3"},H=Object(n["h"])("label",{for:"email",class:"form-label"},"Email",-1),K={class:"mb-3"},A=Object(n["h"])("label",{for:"phone",class:"form-label"},"電話",-1),I={class:"mb-3"},S=Object(n["h"])("label",{for:"address",class:"form-label"},"地址",-1),T={class:"mb-3"},P=Object(n["h"])("label",{for:"message",class:"form-label"},"留言",-1),E=Object(n["h"])("button",{class:"btn btn-primary"},"送出訂單",-1);function F(t,e,c,u,F,B){var J=Object(n["H"])("LoadingStyle"),G=Object(n["H"])("Loading"),M=Object(n["H"])("router-link"),z=Object(n["H"])("Field"),D=Object(n["H"])("error-message"),N=Object(n["H"])("Form"),Q=Object(n["H"])("Bg");return Object(n["x"])(),Object(n["e"])(Q,null,{default:Object(n["T"])((function(){return[Object(n["j"])(G,{active:F.isLoading},{default:Object(n["T"])((function(){return[Object(n["j"])(J)]})),_:1},8,["active"]),Object(n["h"])("div",a,[Object(n["h"])("div",o,[Object(n["h"])("div",r,[Object(n["h"])("table",i,[s,Object(n["h"])("tbody",null,[F.cart.carts?(Object(n["x"])(!0),Object(n["g"])(n["a"],{key:0},Object(n["F"])(F.cart.carts,(function(e,c){return Object(n["x"])(),Object(n["g"])("tr",{key:c},[Object(n["h"])("td",null,[Object(n["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return B.delCart(e)}},d,8,l)]),Object(n["h"])("td",null,[Object(n["i"])(Object(n["K"])(e.product.title)+" ",1),e.coupon?(Object(n["x"])(),Object(n["g"])("div",b,"已套用優惠券")):Object(n["f"])("",!0)]),Object(n["h"])("td",null,[Object(n["h"])("div",f,[Object(n["U"])(Object(n["h"])("input",{type:"number",class:"form-control",min:"1",onChange:function(t){return B.updateCart(e)},disabled:e.id===F.isLoadingItem,"onUpdate:modelValue":function(t){return e.qty=t}},null,40,j),[[n["P"],e.qty,void 0,{number:!0}]]),Object(n["h"])("div",h,Object(n["K"])(e.product.unit),1)])]),Object(n["h"])("td",O,[F.cart.final_total!==F.cart.total?(Object(n["x"])(),Object(n["g"])("div",p,[Object(n["h"])("del",null,Object(n["K"])(t.$filters.currency(e.total)),1),Object(n["h"])("div",m,"折扣價 "+Object(n["K"])(t.$filters.currency(e.final_total)),1)])):(Object(n["x"])(),Object(n["g"])("div",v,Object(n["K"])(t.$filters.currency(e.final_total)),1))])])})),128)):Object(n["f"])("",!0)]),Object(n["h"])("tfoot",null,[Object(n["h"])("tr",null,[g,Object(n["h"])("td",x,Object(n["K"])(t.$filters.currency(F.cart.total)),1)]),F.cart.final_total!==F.cart.total?(Object(n["x"])(),Object(n["g"])("tr",y,[w,Object(n["h"])("td",k,Object(n["K"])(t.$filters.currency(F.cart.final_total)),1)])):Object(n["f"])("",!0)])]),Object(n["h"])("div",C,[Object(n["U"])(Object(n["h"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[n["P"],t.coupon_code]]),Object(n["h"])("div",V,[Object(n["h"])("button",{type:"button",class:"btn btn-outline-red",onClick:e[1]||(e[1]=function(){return B.addCoupon&&B.addCoupon.apply(B,arguments)})},"套用優惠碼")])]),Object(n["j"])(M,{class:"btn btn-outline-red w-50",to:"/food"},{default:Object(n["T"])((function(){return[L]})),_:1})]),Object(n["h"])("div",_,[Object(n["j"])(N,{onSubmit:B.createOrder},{default:Object(n["T"])((function(t){var c=t.errors;return[Object(n["h"])("div",$,[U,Object(n["j"])(z,{id:"name",name:"姓名",type:"text",class:Object(n["r"])(["form-control",{"is-invalid":c["姓名"]}]),rules:"required",modelValue:F.form.user.name,"onUpdate:modelValue":e[2]||(e[2]=function(t){return F.form.user.name=t}),placeholder:"請輸入姓名"},null,8,["modelValue","class"]),Object(n["j"])(D,{class:"invalid-feedback",name:"姓名"})]),Object(n["h"])("div",q,[H,Object(n["j"])(z,{id:"email",name:"email",type:"email",class:Object(n["r"])(["form-control",{"is-invalid":c["email"]}]),rules:"email|required",modelValue:F.form.user.email,"onUpdate:modelValue":e[3]||(e[3]=function(t){return F.form.user.email=t}),placeholder:"請輸入 Email"},null,8,["modelValue","class"]),Object(n["j"])(D,{name:"email",class:"invalid-feedback"})]),Object(n["h"])("div",K,[A,Object(n["j"])(z,{id:"phone",name:"電話",type:"text",class:Object(n["r"])(["form-control",{"is-invalid":c["電話"]}]),rules:B.isPhone,modelValue:F.form.user.tel,"onUpdate:modelValue":e[4]||(e[4]=function(t){return F.form.user.tel=t}),placeholder:"請輸入電話"},null,8,["rules","modelValue","class"]),Object(n["j"])(D,{class:"invalid-feedback",name:"電話"})]),Object(n["h"])("div",I,[S,Object(n["j"])(z,{id:"address",name:"地址",type:"text",class:Object(n["r"])(["form-control",{"is-invalid":c["地址"]}]),modelValue:F.form.user.address,"onUpdate:modelValue":e[5]||(e[5]=function(t){return F.form.user.address=t}),rules:"required",placeholder:"請輸入地址"},null,8,["modelValue","class"]),Object(n["j"])(D,{class:"invalid-feedback",name:"地址"})]),Object(n["h"])("div",T,[P,Object(n["U"])(Object(n["h"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[6]||(e[6]=function(t){return F.form.message=t})},null,512),[[n["P"],F.form.message]])]),E]})),_:1},8,["onSubmit"])])])])]})),_:1})}c("99af");var B=c("30c7"),J=c("4b79"),G={data:function(){return{cart:{},isLoading:!1,isLoadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{Bg:B["a"],LoadingStyle:J["a"]},methods:{getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wang11-api","/cart");this.isLoading=!0,this.$http.get(e).then((function(e){t.isLoading=!1,console.log(e.data.data),t.cart=e.data.data}))},updateCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wang11-api","/cart/").concat(t.id);this.isLoadingItem=t.id;var n={product_id:t.product_id,qty:t.qty};this.$http.put(c,{data:n}).then((function(t){e.getCart(),e.emitter.emit("reset"),e.isLoadingItem=""}))},delCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wang11-api","/cart/").concat(t.id);this.isLoading=!0,this.$http.delete(c).then((function(t){e.isLoading=!1,e.emitter.emit("reset"),e.getCart()}))},addCoupon:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wang11-api","/coupon");this.isLoading=!0;var c={code:this.coupon_code};this.$http.post(e,{data:c}).then((function(e){t.isLoading=!1,t.getCart()}))},isPhone:function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要正確的電話號碼"},createOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("wang11-api","/order"),c=this.form;this.$http.post(e,{data:c}).then((function(e){console.log(e.data.orderId),t.$router.push("/checkout/".concat(e.data.orderId))}))}},created:function(){this.getCart()},inject:["emitter"]};G.render=F;e["default"]=G},c541:function(t,e,c){"use strict";c("ec86")},d9c1:function(t,e,c){"use strict";c("a68e")},e8b5:function(t,e,c){var n=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}},ec86:function(t,e,c){}}]);
//# sourceMappingURL=chunk-08cd3d92.f3e43e34.js.map